# GPU 安装记录

2020.09.15，我们在64服务器上安装了一块显卡(Nivida TITAN V).

## 最后一次成功安装的步骤

+ module load gcc/9.3.0
+ sh NVIDIA-Linux-x86_64-450.51.05.run
+ sh cuda_11.0.3_450.51.06_linux.run

第一步是加载gcc 9.3.0，第二部安装驱动，第三步安装cuda。

其中，安装驱动步骤会提示gcc版本和编译内核时使用的gcc版本不同，直接选择忽略检查即可，其余可用默认选项。

第三步安装cuda时去掉driver一项（因为前面一步已经安装过了）。同时在option中去掉了为每一位用户创建快捷方式的选项。

上述.run文件均可在`/home/gaoj/download`目录下找到。

## 失败案例

最初，工程师安装了驱动（上面的第二步的.run文件（也加载了gcc 9.3.0））.

之后从nvidia下载了rpm的cuda包，按照说明安装后系统无法驱动显卡。

卸载后只使用rpm依然失败。

此外，使用默认gcc （4.9.2）时，.run文件安装驱动会失败。推测可能的原因是：

1. 可能是系统原带的gcc是4.8.5，而4.9.2和4.8.5某些行为不一致，但在9.3.0中又修复了。
2. cuda的文档中提到cuda需要c++11特性，因此需要gcc>5。虽说这一步是按照驱动而不是cuda，但是依然有可能驱动中用到了c++11特性。

